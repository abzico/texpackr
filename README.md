# texpackr
Textures packer into texture atlas, spit out atlas, and meta data. Aim to support .png, and .dds

# Build

* `make` - to build all included library (as object files), cli (command line program), and test program
* `make test` - to build library (as object files), and test program
* `make clean` - clean generated files and directory (`build` directory)

To **not** have texpackr spits out debugging log along the way, specify `-DTEXPACKR_NDEUB`

* `make CFLAGS=-DTEXPACKR_NDEBUG` or `make test CFLAGS=-DTEXPACKR_NDEBUG`

# Dependencies

* [hashmap_c](https://github.com/haxpor/hashmap_c) as git submodule located at `src/externals/hashmap_c`.

# Meta File Format

When export into a spritesheet and meta file, the latter has the following format.

```
# generated by texpackr (....), this is comment line and ignored by texpackr's processor
sheet_width sheet_height
number_of_sprites
path/to/sprite/1.png offset_x offset_y size_x size_y
path/to/sprite/2.png offset_x offset_y size_x size_y
...
path/to/sprite/N.png offset_x offset_y size_x size_y
```

Example is as follows

```
# generated by texpackr (....), this is comment line and ignored by texpackr's processor
1024 1024
7
images/1.png 0 0 380 231
images/2.png 380 0 128 87
images/3.png 0 231 636 264
images/4.png 0 495 400 400
images/5.png 636 231 256 259
images/6.png 400 755 510 254
images/7.png 508 0 128 151
```

# TODO

## Phase I
- [x] packing algorithm for multiple images into a single texture atlas
- [x] read .png (support 1-4 channels: gray, gray-alpha, RGB, and RGBA) image as input
- [x] save into a texture atlas as .png image
- [ ] read .jpg image as input
- [ ] save into a texture atlas as .dds image
- [x] save meta data into file (with file extension `.tpr`)
- [x] parse meta file and get sheet + sprites info
- [x] C API
- [ ] command line for all major operations supported by C API

## Phase II
- [ ] ability to scale input images then output it
- [ ] cut out alpha pixels to maximize capacity of sprite storage in result spritesheet
- [ ] spacing between sprites packed in sheet

# License
MIT, ABZI
